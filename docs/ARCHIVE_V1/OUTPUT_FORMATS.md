# Wins Library System - Phase 6 Output Formats Documentation

This document describes the output formats generated by the Wins Library System Phase 6.

---

## Overview

Phase 6 generates user-facing outputs from approved SuccessStory objects. All outputs are:
- **Template-driven** - Uses Jinja2 templates for flexible formatting
- **Configurable** - Output settings defined in `config/output_config.yaml`
- **Deterministic** - Same input produces same output
- **Auditable** - All outputs track source stories and generation timestamp

---

## Output Formats

### 1. Executive Format

**Purpose:** Internal leadership review and reporting
**Template:** `templates/outputs/executive.md.jinja`
**Output Location:** `vault/outputs/executive/{story_id}.md`
**Audience:** Executives, leadership team

**Characteristics:**
- Professional, concise tone
- Highlights quantifiable metrics
- Shows complete metadata
- Includes internal-only stories

**Key Sections:**
- Customer name and metadata
- Business Challenge (context)
- What We Did (action)
- Impact & Results (outcome + metrics)
- Metadata section with industry, team size, sources

---

### 2. Marketing Format

**Purpose:** External communication and marketing materials
**Template:** `templates/outputs/marketing.md.jinja`
**Output Location:** `vault/outputs/marketing/{story_id}.md`
**Audience:** External customers, partners

**Characteristics:**
- Customer-centric language
- Emphasizes positive outcomes
- **Excludes** internal-only stories
- Shorter, more digestible format

**Key Sections:**
- Customer name (heading)
- The Challenge (context)
- The Solution (action)
- The Results (outcome + metrics)
- Industry tag

**Note:** Stories with `internal_only=True` are automatically excluded from marketing outputs.

---

### 3. Obsidian Note Format

**Purpose:** Knowledge management in Obsidian vault
**Template:** `templates/outputs/obsidian_note.md.jinja`
**Output Location:** User-defined (via `write_success_story_note()`)
**Audience:** Knowledge workers, Obsidian users

**Characteristics:**
- YAML frontmatter for Obsidian properties
- Links notes by tags, customer, country, etc.
- Full story content
- Backlink-friendly structure

**YAML Frontmatter Fields:**
```yaml
---
type: success-story
customer: {customer}
country: {country}
month: {month}
industry: {industry}
confidence: {confidence}
tags: [tags]
---
```

---

### 4. Weekly Summary Format

**Purpose:** Periodic summaries of published wins
**Template:** `templates/outputs/weekly_summary.md.jinja`
**Output Location:** User-defined (via `write_weekly_summary()`)
**Audience:** Team members, stakeholders

**Characteristics:**
- Aggregates multiple stories
- Summary statistics (by country, confidence)
- Links to full story notes
- Configurable period (week, month, quarter)

**Key Sections:**
- Summary statistics
- Story previews (200 character context)
- Links to full stories
- Generated timestamp

---

## Configuration

All Phase 6 behavior is controlled by `config/output_config.yaml`:

### Template Configuration
- Template base directory
- Template file names for each format
- Easy to add new templates or modify existing ones

### Output Destinations
- Base output directory
- Subdirectories for each format
- Configurable paths

### Generation Settings
- `create_missing_dirs` - Auto-create output directories
- `overwrite_existing` - Overwrite existing files
- `include_metadata` - Include metadata in outputs
- `story_filename_format` - Filename pattern for stories

### Format-Specific Settings
- Executive format: Preview length, bullets, sources
- Marketing format: Internal story exclusion, outcome length limits
- Obsidian: Frontmatter, default tags, linking behavior

---

## Usage Examples

### Generate Executive Output for Single Story
```python
from workflow.outputs.executive import generate_executive_output
from models.library import load_success_story

story = load_success_story("win-2026-01-US-1234abcd", library_dir)
output = generate_executive_output(story)

# Write to file
with open("output.md", "w") as f:
    f.write(output)
```

### Batch Generate Marketing Outputs
```python
from workflow.writer import write_marketing_outputs
from models.library import load_all_stories

stories = load_all_stories(library_dir)
paths = write_marketing_outputs(stories, output_dir="vault/outputs")
```

### Generate Weekly Summary
```python
from workflow.writer import write_weekly_summary
from models.library import load_all_stories

stories = load_all_stories(library_dir)
write_weekly_summary(
    stories,
    output_path=Path("vault/outputs/summaries/2026-W05.md"),
    week_str="2026-W05"
)
```

---

## Template Customization

To modify output formats:

1. **Edit templates** in `templates/outputs/` directory
2. **Update config** in `config/output_config.yaml` if adding new templates
3. **Regenerate outputs** - All outputs use updated templates automatically

Template variables available (varies by template):
- `story` - SuccessStory object
- `story.id`, `story.customer`, `story.country`, `story.month`
- `story.context`, `story.action`, `story.outcome`
- `story.metrics`, `story.confidence`, `story.internal_only`
- `story.tags`, `story.industry`, `story.team_size`
- `story.raw_sources`, `story.last_updated`

---

## Determinism & Reproducibility

Phase 6 is deterministic and repeatable:
- Same SuccessStory + same template = same output
- Templates are versioned and reusable
- No randomness in output generation
- All configuration is explicit (no hidden logic)

---

## Audit Trail

Every output generation logs:
- Which story was processed
- Which template was used
- Where file was written
- Timestamp of generation

Example log:
```
INFO:Wrote executive output for win-2026-01-US-1234abcd to vault/outputs/executive/win-2026-01-US-1234abcd.md
```

---

*Generated by Wins Library System - Phase 6*
*Last Updated: 2026-02-01*
